# í•˜ë£¨ í•œ ë¬¸ì¥ - í™•ì¥ì„± ì„¤ê³„ ê³„íšì„œ

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [í™•ì¥ì„± ìš”êµ¬ì‚¬í•­ ë¶„ì„](#í™•ì¥ì„±-ìš”êµ¬ì‚¬í•­-ë¶„ì„)
3. [í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜](#í”„ë¡ íŠ¸ì—”ë“œ-ì•„í‚¤í…ì²˜)
4. [ë°±ì—”ë“œ ì•„í‚¤í…ì²˜](#ë°±ì—”ë“œ-ì•„í‚¤í…ì²˜)
5. [Firebase í™œìš© ì „ëµ](#firebase-í™œìš©-ì „ëµ)
6. [í´ë” êµ¬ì¡° ë° ì½”ë“œ ì¡°ì§](#í´ë”-êµ¬ì¡°-ë°-ì½”ë“œ-ì¡°ì§)
7. [ì„±ëŠ¥ ìµœì í™” ê³„íš](#ì„±ëŠ¥-ìµœì í™”-ê³„íš)
8. [CI/CD ë° ë°°í¬ ì „ëµ](#cicd-ë°-ë°°í¬-ì „ëµ)
9. [ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš](#ë‹¨ê³„ë³„-ì‹¤í–‰-ê³„íš)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ¯ ì•„í‚¤í…ì²˜ ê°œìš”
```
ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°:
React + TypeScript + MUI (Frontend)
    â†•ï¸
Firebase Functions + TypeScript (Backend)
    â†•ï¸
Firebase Firestore (Database)
```

### ğŸ”§ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë¡ íŠ¸ì—”ë“œ**: React 18 + TypeScript + Material-UI + Zustand
- **ë°±ì—”ë“œ**: Firebase Functions + TypeScript + Express íŒ¨í„´
- **ë°ì´í„°ë² ì´ìŠ¤**: Firebase Firestore (NoSQL)
- **ìƒíƒœ ê´€ë¦¬**: Zustand (ì „ì—­) + TanStack Query (ì„œë²„ ìƒíƒœ)
- **ë¹Œë“œ/ë°°í¬**: Vite + GitHub Actions + Firebase Hosting

---

## í™•ì¥ì„± ìš”êµ¬ì‚¬í•­ ë¶„ì„

### ğŸ“ˆ í™•ì¥ ì‹œë‚˜ë¦¬ì˜¤

| ì˜ì—­ | í˜„ì¬ (MVP) | 6ê°œì›” í›„ | 1ë…„ í›„ |
|------|------------|----------|--------|
| **ì‚¬ìš©ì** | ìµëª… ë°©ë¬¸ì | íšŒì›ê°€ì…, ê°œì¸í™” | ì†Œì…œ ë¡œê·¸ì¸, ì»¤ë®¤ë‹ˆí‹° |
| **íŠ¸ë˜í”½** | 100ëª…/ì¼ | 10,000ëª…/ì¼ | 100,000ëª…/ì¼ |
| **ê¸°ëŠ¥** | ê¸€ë³´ê¸°, ê³µê°, ì œì¶œ | ë¶ë§ˆí¬, ê²€ìƒ‰, ì¹´í…Œê³ ë¦¬ | ê°œì¸ ì»¬ë ‰ì…˜, ê³µìœ , ëŒ“ê¸€ |
| **í”Œë«í¼** | ì›¹ only | PWA ì¶”ê°€ | ëª¨ë°”ì¼ ì•±, ë¸Œë¼ìš°ì € í™•ì¥ |
| **ì½˜í…ì¸ ** | í…ìŠ¤íŠ¸ë§Œ | ì´ë¯¸ì§€ ì¸ìš©êµ¬ | ë™ì˜ìƒ, ì˜¤ë””ì˜¤, ë‹¤êµ­ì–´ |

### ğŸ¯ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­
1. **ì„±ëŠ¥**: ë ˆì´ì§€ ë¡œë”©, ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…, ìºì‹± ì „ëµ
2. **í™•ì¥ì„±**: ëª¨ë“ˆí™”, ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©, ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ë¦¬
3. **ìœ ì§€ë³´ìˆ˜ì„±**: íƒ€ì… ì•ˆì •ì„±, í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€, ë¬¸ì„œí™”
4. **ë¹„ìš© íš¨ìœ¨ì„±**: Firebase ìš”ê¸ˆì œ ìµœì í™”, ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

---

## í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### ğŸ¨ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜ (Atomic Design)
```
ğŸ“ src/components/
â”œâ”€â”€ ğŸ”¹ atoms/          # ìµœì†Œ ë‹¨ìœ„ (Button, Input, Text)
â”œâ”€â”€ ğŸ”¸ molecules/      # ì¡°í•© ì»´í¬ë„ŒíŠ¸ (SearchBar, LikeButton)
â”œâ”€â”€ ğŸ”· organisms/      # ë³µí•© ì»´í¬ë„ŒíŠ¸ (QuoteCard, Header, SubmissionForm)
â”œâ”€â”€ ğŸ“„ templates/      # í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
â””â”€â”€ ğŸ  pages/          # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
```

### ğŸ“Š ìƒíƒœ ê´€ë¦¬ ì „ëµ
```typescript
// ì „ì—­ ìƒíƒœ: Zustand (ê°€ë²¼ì›€ + í™•ì¥ì„±)
interface AppStore {
  // UI ìƒíƒœ
  theme: 'light' | 'dark';
  isLoading: boolean;

  // ë¹„ì¦ˆë‹ˆìŠ¤ ìƒíƒœ
  currentQuote: Quote | null;
  likeCount: number;

  // ì•¡ì…˜ë“¤
  setTheme: (theme: 'light' | 'dark') => void;
  incrementLike: () => void;
}

// ì„œë²„ ìƒíƒœ: TanStack Query
const useQuote = () => useQuery({
  queryKey: ['quote', 'today'],
  queryFn: getTodaysQuote,
  staleTime: 1000 * 60 * 30 // 30ë¶„
});
```

### ğŸ›£ï¸ ë¼ìš°íŒ… êµ¬ì¡°
```typescript
// ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… + ë ˆì´ì§€ ë¡œë”©
const HomePage = lazy(() => import('@/pages/HomePage'));
const SubmitPage = lazy(() => import('@/pages/SubmitPage'));
const AdminPage = lazy(() => import('@/pages/AdminPage'));

const AppRouter = () => (
  <Router>
    <Suspense fallback={<LoadingSpinner />}>
      <Routes>
        <Route path="/" element={<HomePage />} />
        <Route path="/submit" element={<SubmitPage />} />
        <Route path="/admin" element={<ProtectedRoute><AdminPage /></ProtectedRoute>} />
      </Routes>
    </Suspense>
  </Router>
);
```

### ğŸ“ íƒ€ì… ì‹œìŠ¤í…œ
```typescript
// ë„ë©”ì¸ íƒ€ì… ì •ì˜
interface Quote {
  id: string;
  type: 'quote' | 'text';
  content: string;
  like_count: number;
  last_shown_date: string;
  status: 'published' | 'hidden';
}

// API ì‘ë‹µ íƒ€ì…
type ApiResponse<T> = {
  data: T;
  error?: string;
  timestamp: number;
};

// ì»´í¬ë„ŒíŠ¸ Props íƒ€ì…
interface QuoteCardProps {
  quote: Quote;
  onLike: () => void;
  onShare: () => void;
}
```

---

## ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

### ğŸ—ï¸ ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ (Firebase ê¸°ë°˜)
```
ğŸ—ï¸ Backend Architecture:
â”œâ”€â”€ ğŸŒ Presentation Layer    # API endpoints, HTTP handlers
â”œâ”€â”€ ğŸ“‹ Business Layer        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ë„ë©”ì¸ ì„œë¹„ìŠ¤
â”œâ”€â”€ ğŸ’¾ Data Access Layer     # Firestore ì ‘ê·¼, ë°ì´í„° ë³€í™˜
â””â”€â”€ ğŸ”§ Infrastructure Layer  # Firebase ì„¤ì •, ì™¸ë¶€ API
```

### âš¡ Cloud Functions êµ¬ì¡°
```typescript
// functions/src/index.ts
export {
  // HTTP Functions (REST API)
  getTodaysQuote,
  submitQuote,
  incrementLike,

  // Scheduled Functions
  selectDailyQuote,
  cleanupOldSubmissions,

  // Trigger Functions
  onQuoteCreated,
  onSubmissionCreated
} from './functions';

// functions/src/services/
â”œâ”€â”€ QuoteService.ts      # ê¸€ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ SubmissionService.ts # ì œì¶œ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ AdminService.ts      # ê´€ë¦¬ì ê¸°ëŠ¥
â””â”€â”€ NotificationService.ts # ì•Œë¦¼ (í–¥í›„ í™•ì¥)
```

### ğŸ“‹ ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì˜ˆì‹œ
```typescript
// QuoteService.ts - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìº¡ìŠí™”
class QuoteService {
  private repository: QuoteRepository;

  async getTodaysQuote(): Promise<Quote | null> {
    const today = this.formatDate(new Date());
    const dailyQuote = await this.repository.getDailyQuote(today);

    if (!dailyQuote) {
      // ì˜¤ëŠ˜ì˜ ê¸€ì´ ì—†ìœ¼ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰
      await this.selectRandomQuote();
      return await this.repository.getDailyQuote(today);
    }

    return await this.repository.getQuoteById(dailyQuote.quote_id);
  }

  async selectRandomQuote(): Promise<void> {
    const cutoffDate = this.getCutoffDate(100); // 100ì¼ ì „
    const availableQuotes = await this.repository.getAvailableQuotes(cutoffDate);

    if (availableQuotes.length === 0) {
      throw new Error('ì‚¬ìš© ê°€ëŠ¥í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤');
    }

    const randomQuote = this.pickRandom(availableQuotes);
    await this.repository.setDailyQuote(randomQuote.id);
    await this.repository.updateLastShownDate(randomQuote.id);
  }
}
```

### ğŸ’¾ ë°ì´í„° ì ‘ê·¼ ë ˆì´ì–´
```typescript
// repositories/QuoteRepository.ts
class QuoteRepository {
  private db = admin.firestore();

  async getQuoteById(id: string): Promise<Quote | null> {
    const doc = await this.db.collection('quotes').doc(id).get();
    return doc.exists ? this.mapToQuote(doc) : null;
  }

  async getAvailableQuotes(cutoffDate: string): Promise<Quote[]> {
    const snapshot = await this.db.collection('quotes')
      .where('status', '==', 'published')
      .where('last_shown_date', '<=', cutoffDate)
      .get();

    return snapshot.docs.map(doc => this.mapToQuote(doc));
  }

  private mapToQuote(doc: FirebaseFirestore.DocumentSnapshot): Quote {
    const data = doc.data()!;
    return {
      id: doc.id,
      type: data.type,
      content: data.content,
      like_count: data.like_count,
      last_shown_date: data.last_shown_date,
      status: data.status
    };
  }
}
```

---

## Firebase í™œìš© ì „ëµ

### ğŸ”¥ í˜„ì¬ (MVP) ë‹¨ê³„
```yaml
í•„ìˆ˜ ì„œë¹„ìŠ¤:
  Firestore:
    - quotes, submissions, daily_quotes ì»¬ë ‰ì…˜
    - ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ (ê³µê° ìˆ˜ ì—…ë°ì´íŠ¸)

  Cloud Functions:
    - selectDailyQuote (ìŠ¤ì¼€ì¤„ í•¨ìˆ˜)
    - HTTP API ì—”ë“œí¬ì¸íŠ¸ë“¤

  Hosting:
    - React ì•± ë°°í¬
    - ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°

ì„ íƒì  ì„œë¹„ìŠ¤:
  Analytics: ê¸°ë³¸ íŠ¸ë˜í”½ ë¶„ì„
  Performance: í˜ì´ì§€ ë¡œë”© ì†ë„ ëª¨ë‹ˆí„°ë§
```

### ğŸ“ˆ í™•ì¥ ë‹¨ê³„ë³„ Firebase í™œìš©

#### 6ê°œì›” í›„ (ì‚¬ìš©ì ì¸ì¦ ì¶”ê°€)
```typescript
// Authentication ë„ì…
import { getAuth, signInAnonymously } from 'firebase/auth';

// ìµëª… ì¸ì¦ìœ¼ë¡œ ì‹œì‘ â†’ í–¥í›„ ì†Œì…œ ë¡œê·¸ì¸ í™•ì¥
const auth = getAuth();
await signInAnonymously(auth);

// Firestore ë³´ì•ˆ ê·œì¹™ ê°•í™”
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /user_favorites/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

#### 1ë…„ í›„ (í’€ ìŠ¤íƒ í™•ì¥)
```typescript
// Storage í™œìš© (ì´ë¯¸ì§€ ì¸ìš©êµ¬)
import { getStorage, ref, uploadBytes } from 'firebase/storage';

// Remote Config (A/B í…ŒìŠ¤íŒ…, ê¸°ëŠ¥ í”Œë˜ê·¸)
import { getRemoteConfig, fetchAndActivate } from 'firebase/remote-config';

// App Check (ë³´ì•ˆ ê°•í™”)
import { getAppCheck, initializeAppCheck } from 'firebase/app-check';
```

---

## í´ë” êµ¬ì¡° ë° ì½”ë“œ ì¡°ì§

### ğŸ“ ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
ğŸ“ daily-quote/
â”œâ”€â”€ ğŸ¨ frontend/                 # React ì•±
â”œâ”€â”€ âš™ï¸  functions/                # Firebase Functions (ë°±ì—”ë“œ)
â”œâ”€â”€ ğŸ“¦ shared/                   # ê³µí†µ íƒ€ì…, ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ ğŸ“‹ docs/                     # ì„¤ê³„ ë¬¸ì„œ, API ë¬¸ì„œ
â”œâ”€â”€ ğŸ§ª e2e/                      # E2E í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ğŸ”§ .github/                  # GitHub Actions
â”œâ”€â”€ ğŸ”¥ firebase.json             # Firebase ì„¤ì •
â”œâ”€â”€ ğŸ“„ package.json              # ë£¨íŠ¸ ì˜ì¡´ì„±
â””â”€â”€ ğŸ“– README.md                 # í”„ë¡œì íŠ¸ ê°œìš”
```

### ğŸ¨ Frontend êµ¬ì¡° (Feature-Based)
```
ğŸ“ frontend/src/
â”œâ”€â”€ ğŸ¯ features/                 # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ quote/                   # ê¸€ ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ components/          # QuoteCard, QuoteActions ë“±
â”‚   â”‚   â”œâ”€â”€ hooks/               # useQuote, useLike ë“±
â”‚   â”‚   â”œâ”€â”€ services/            # quote API í˜¸ì¶œ
â”‚   â”‚   â””â”€â”€ types/               # ê¸€ ê´€ë ¨ íƒ€ì…
â”‚   â”œâ”€â”€ submission/              # ì œì¶œ ê´€ë ¨
â”‚   â””â”€â”€ admin/                   # ê´€ë¦¬ì ê¸°ëŠ¥
â”œâ”€â”€ ğŸ§© shared/                   # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ components/              # Button, Input, Modal ë“±
â”‚   â”‚   â”œâ”€â”€ atoms/
â”‚   â”‚   â”œâ”€â”€ molecules/
â”‚   â”‚   â””â”€â”€ organisms/
â”‚   â”œâ”€â”€ hooks/                   # useLocalStorage ë“±
â”‚   â”œâ”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ constants/               # ìƒìˆ˜ ì •ì˜
â”œâ”€â”€ ğŸ  pages/                    # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ ğŸ¨ styles/                   # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼, í…Œë§ˆ
â”œâ”€â”€ ğŸ“¡ services/                 # API ì„¤ì •, Firebase ì´ˆê¸°í™”
â”œâ”€â”€ ğŸ—„ï¸  store/                   # ìƒíƒœ ê´€ë¦¬ (Zustand)
â””â”€â”€ ğŸ“± App.tsx                   # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
```

### âš™ï¸ Backend êµ¬ì¡° (Layer-Based)
```
ğŸ“ functions/src/
â”œâ”€â”€ ğŸŒ api/                      # HTTP ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ quotes.ts                # GET /quotes, POST /quotes/:id/like
â”‚   â”œâ”€â”€ submissions.ts           # POST /submissions
â”‚   â””â”€â”€ admin.ts                 # ê´€ë¦¬ì API
â”œâ”€â”€ ğŸ“‹ services/                 # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ QuoteService.ts
â”‚   â”œâ”€â”€ SubmissionService.ts
â”‚   â””â”€â”€ AdminService.ts
â”œâ”€â”€ ğŸ’¾ repositories/             # ë°ì´í„° ì ‘ê·¼
â”‚   â”œâ”€â”€ QuoteRepository.ts
â”‚   â””â”€â”€ SubmissionRepository.ts
â”œâ”€â”€ â° schedulers/               # ìŠ¤ì¼€ì¤„ í•¨ìˆ˜
â”‚   â””â”€â”€ dailyQuoteSelector.ts
â”œâ”€â”€ ğŸ”§ utils/                    # ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ ğŸ“¡ config/                   # Firebase ì„¤ì •
â””â”€â”€ ğŸ“„ index.ts                  # Functions ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
```

### ğŸ“¦ ê³µí†µ ëª¨ë“ˆ (Shared)
```
ğŸ“ shared/
â”œâ”€â”€ ğŸ“ types/                    # ê³µí†µ íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ Quote.ts
â”‚   â”œâ”€â”€ Submission.ts
â”‚   â””â”€â”€ ApiResponse.ts
â”œâ”€â”€ ğŸ”§ utils/                    # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ dateUtils.ts
â”‚   â””â”€â”€ validationUtils.ts
â””â”€â”€ ğŸ“Š constants/                # ê³µí†µ ìƒìˆ˜
    â””â”€â”€ index.ts
```

---

## ì„±ëŠ¥ ìµœì í™” ê³„íš

### âš¡ í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™”
```typescript
// ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… & ë ˆì´ì§€ ë¡œë”©
const HomePage = lazy(() =>
  import('../pages/HomePage').then(module => ({
    default: module.HomePage
  }))
);

// ì´ë¯¸ì§€ ìµœì í™”
const OptimizedImage = ({ src, alt, ...props }) => (
  <img
    src={src}
    alt={alt}
    loading="lazy"
    decoding="async"
    {...props}
  />
);

// ë©”ëª¨ì´ì œì´ì…˜ ì „ëµ
const QuoteCard = memo(({ quote, onLike }) => {
  const handleLike = useCallback(() => {
    onLike(quote.id);
  }, [quote.id, onLike]);

  return (
    <Card>
      <Typography>{quote.content}</Typography>
      <Button onClick={handleLike}>â¤ï¸ {quote.like_count}</Button>
    </Card>
  );
});
```

### ğŸ”§ ë°±ì—”ë“œ ì„±ëŠ¥ ìµœì í™”
```typescript
// Firestore ì¿¼ë¦¬ ìµœì í™”
class QuoteRepository {
  // ë³µí•© ì¸ë±ìŠ¤ í™œìš©
  async getAvailableQuotes(cutoffDate: string, limit: number = 50) {
    return await this.db.collection('quotes')
      .where('status', '==', 'published')
      .where('last_shown_date', '<=', cutoffDate)
      .orderBy('last_shown_date', 'asc')
      .limit(limit)  // í˜ì´ì§€ë„¤ì´ì…˜
      .get();
  }

  // ìºì‹± ì „ëµ
  private cache = new Map();

  async getTodaysQuote(): Promise<Quote | null> {
    const today = this.getToday();
    const cached = this.cache.get(`daily-${today}`);

    if (cached) return cached;

    const quote = await this.fetchTodaysQuote();
    this.cache.set(`daily-${today}`, quote);
    return quote;
  }
}
```

### ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì •
```typescript
// Firebase Performance Monitoring
import { getPerformance, trace } from 'firebase/performance';

const perf = getPerformance();

// ì»¤ìŠ¤í…€ íŠ¸ë ˆì´ìŠ¤
const loadQuoteTrace = trace(perf, 'load_quote');
loadQuoteTrace.start();

try {
  const quote = await fetchTodaysQuote();
  loadQuoteTrace.putAttribute('quote_length', quote.content.length.toString());
} finally {
  loadQuoteTrace.stop();
}

// Web Vitals ëª¨ë‹ˆí„°ë§
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

getCLS(console.log);
getFID(console.log);
getFCP(console.log);
getLCP(console.log);
getTTFB(console.log);
```

### ğŸ’¾ ìºì‹± ì „ëµ
```typescript
// Service Worker (PWA)
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js');
}

// TanStack Query ìºì‹±
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 30, // 30ë¶„
      cacheTime: 1000 * 60 * 60, // 1ì‹œê°„
    },
  },
});
```

---

## CI/CD ë° ë°°í¬ ì „ëµ

### ğŸš€ GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
# .github/workflows/deploy.yml
name: Deploy Daily Quote

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

env:
  NODE_VERSION: '18'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: ${{ env.NODE_VERSION }}

      # ì˜ì¡´ì„± ì„¤ì¹˜
      - name: Install dependencies
        run: |
          npm ci
          cd frontend && npm ci
          cd ../functions && npm ci

      # ì½”ë“œ í’ˆì§ˆ ì²´í¬
      - name: Run linting
        run: |
          npm run lint:frontend
          npm run lint:functions

      # íƒ€ì… ì²´í¬
      - name: Type check
        run: |
          npm run type-check:frontend
          npm run type-check:functions

      # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      - name: Run tests
        run: |
          npm run test:frontend
          npm run test:functions

  build:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/develop'

    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3

      # í™˜ê²½ë³„ ë¹Œë“œ
      - name: Build frontend
        env:
          REACT_APP_ENV: ${{ github.ref == 'refs/heads/main' && 'production' || 'development' }}
        run: |
          cd frontend
          npm run build

      # Firebase ë°°í¬
      - name: Deploy to Firebase
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT }}'
          projectId: daily-quote-prod
          channelId: ${{ github.ref == 'refs/heads/main' && 'live' || 'preview' }}
```

### ğŸŒ í™˜ê²½ë³„ ë°°í¬ ì „ëµ
```
ğŸŒ í™˜ê²½ êµ¬ì„±:
â”œâ”€â”€ ğŸ”´ Production (main branch)
â”‚   â”œâ”€â”€ Firebase Project: daily-quote-prod
â”‚   â”œâ”€â”€ Domain: dailyquote.com
â”‚   â””â”€â”€ DB: production firestore
â”‚
â”œâ”€â”€ ğŸŸ¡ Staging (develop branch)
â”‚   â”œâ”€â”€ Firebase Project: daily-quote-staging
â”‚   â”œâ”€â”€ Domain: staging.dailyquote.com
â”‚   â””â”€â”€ DB: staging firestore
â”‚
â””â”€â”€ ğŸŸ¢ Development (feature branches)
    â”œâ”€â”€ Firebase Project: daily-quote-dev
    â”œâ”€â”€ Domain: dev.dailyquote.com
    â””â”€â”€ DB: development firestore
```

### ğŸ”§ Firebase í”„ë¡œì íŠ¸ ì„¤ì •
```json
// .firebaserc - í™˜ê²½ë³„ í”„ë¡œì íŠ¸ ë§¤í•‘
{
  "projects": {
    "default": "daily-quote-dev",
    "production": "daily-quote-prod",
    "staging": "daily-quote-staging"
  }
}

// firebase.json - ë°°í¬ ì„¤ì •
{
  "hosting": {
    "public": "frontend/dist",
    "ignore": ["firebase.json", "**/.*", "**/node_modules/**"],
    "rewrites": [{
      "source": "**",
      "destination": "/index.html"
    }]
  },
  "functions": {
    "source": "functions",
    "runtime": "nodejs18",
    "predeploy": "npm run build"
  },
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  }
}
```

### ğŸ“‹ ë¸Œëœì¹˜ ì „ëµ (GitHub Flow)
```
ğŸ“‹ ë¸Œëœì¹˜ ì „ëµ:
â”œâ”€â”€ main          â†’ Production ë°°í¬ (ìë™)
â”œâ”€â”€ develop       â†’ Staging ë°°í¬ (ìë™)
â””â”€â”€ feature/*     â†’ PR ìƒì„± â†’ ë¦¬ë·° â†’ develop ë¨¸ì§€

ğŸ”„ ë°°í¬ í”„ë¡œì„¸ìŠ¤:
1. Feature ê°œë°œ â†’ feature/quote-card ë¸Œëœì¹˜
2. PR ìƒì„± â†’ ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
3. ì½”ë“œ ë¦¬ë·° â†’ develop ë¸Œëœì¹˜ ë¨¸ì§€
4. Staging í™˜ê²½ ìë™ ë°°í¬ â†’ QA í…ŒìŠ¤íŠ¸
5. develop â†’ main PR â†’ Production ë°°í¬
```

---

## ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš

### ğŸš€ Phase 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • (1ì£¼ì°¨)
- [ ] Firebase í”„ë¡œì íŠ¸ ìƒì„± (dev, staging, prod)
- [ ] í´ë” êµ¬ì¡° ìƒì„± ë° ê¸°ë³¸ ì„¤ì • íŒŒì¼ ì‘ì„±
- [ ] package.json, tsconfig.json, eslint, prettier ì„¤ì •
- [ ] GitHub ì €ì¥ì†Œ ìƒì„± ë° ë¸Œëœì¹˜ ì „ëµ ì„¤ì •
- [ ] ê¸°ë³¸ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

### ğŸ¨ Phase 2: í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë°˜ êµ¬ì¡° (2ì£¼ì°¨)
- [ ] React ì•± ì´ˆê¸° ì„¤ì • (Vite + TypeScript + MUI)
- [ ] ìƒíƒœ ê´€ë¦¬ ì„¤ì • (Zustand + TanStack Query)
- [ ] ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¶• (Atomic Design)
- [ ] ë¼ìš°íŒ… ì„¤ì • ë° ê¸°ë³¸ í˜ì´ì§€ êµ¬ì¡°
- [ ] Firebase ì—°ê²° ë° ì´ˆê¸° ì„¤ì •

### âš™ï¸ Phase 3: ë°±ì—”ë“œ í•µì‹¬ ê¸°ëŠ¥ (3ì£¼ì°¨)
- [ ] Firebase Functions í”„ë¡œì íŠ¸ ì„¤ì •
- [ ] Firestore ë°ì´í„° ëª¨ë¸ êµ¬í˜„ ë° ë³´ì•ˆ ê·œì¹™
- [ ] ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬í˜„ (QuoteService, SubmissionService)
- [ ] Repository íŒ¨í„´ êµ¬í˜„
- [ ] ìŠ¤ì¼€ì¤„ëŸ¬ í•¨ìˆ˜ êµ¬í˜„ (ì˜¤ëŠ˜ì˜ ê¸€ ì„ ì •)

### ğŸ”§ Phase 4: API ë° í†µí•© (4ì£¼ì°¨)
- [ ] HTTP API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- [ ] í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ í†µí•©
- [ ] ì‹¤ì‹œê°„ ê¸°ëŠ¥ êµ¬í˜„ (ê³µê° ìˆ˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ë° ë¡œë”© ìƒíƒœ ê´€ë¦¬
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‘ì„±

### ğŸ¯ Phase 5: í•µì‹¬ ê¸°ëŠ¥ ì™„ì„± (5-6ì£¼ì°¨)
- [ ] ë©”ì¸ í˜ì´ì§€ ì™„ì„± (ì˜¤ëŠ˜ì˜ ê¸€ í‘œì‹œ)
- [ ] ê¸€ ì œì¶œ í˜ì´ì§€ êµ¬í˜„
- [ ] ê´€ë¦¬ì í˜ì´ì§€ êµ¬í˜„ (ê¸°ë³¸ ê¸°ëŠ¥)
- [ ] ê³µê° ê¸°ëŠ¥ ë° ê³µìœ  ê¸°ëŠ¥
- [ ] ë°˜ì‘í˜• ë””ìì¸ ì ìš©

### ğŸš€ Phase 6: ìµœì í™” ë° ë°°í¬ (7ì£¼ì°¨)
- [ ] ì„±ëŠ¥ ìµœì í™” (ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…, ë ˆì´ì§€ ë¡œë”©)
- [ ] SEO ìµœì í™” ë° ë©”íƒ€ íƒœê·¸ ì„¤ì •
- [ ] PWA ê¸°ëŠ¥ ì¶”ê°€
- [ ] ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„ ë„êµ¬ ì„¤ì •
- [ ] í”„ë¡œë•ì…˜ ë°°í¬ ë° ë„ë©”ì¸ ì—°ê²°

### ğŸ“Š Phase 7: ê²€ì¦ ë° ê°œì„  (8ì£¼ì°¨)
- [ ] ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ ë° í”¼ë“œë°± ìˆ˜ì§‘
- [ ] ë²„ê·¸ ìˆ˜ì • ë° ê°œì„ ì‚¬í•­ ì ìš©
- [ ] ë¬¸ì„œí™” ì‘ì—… ì™„ë£Œ
- [ ] ì°¨ê¸° ë²„ì „ ê³„íš ìˆ˜ë¦½

---

## ğŸ“ í•µì‹¬ ì„¤ê³„ ê²°ì •ì‚¬í•­

### âœ… ì£¼ìš” ì•„í‚¤í…ì²˜ ì„ íƒ
1. **ìƒíƒœ ê´€ë¦¬**: Zustand + TanStack Query (ê°€ë²¼ìš°ë©´ì„œ í™•ì¥ ê°€ëŠ¥)
2. **ì»´í¬ë„ŒíŠ¸ ì„¤ê³„**: Atomic Design (ì¬ì‚¬ìš©ì„± ìµœëŒ€í™”)
3. **ë°±ì—”ë“œ íŒ¨í„´**: ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ (ìœ ì§€ë³´ìˆ˜ì„±)
4. **í´ë” êµ¬ì¡°**: Feature-based (ê¸°ëŠ¥ë³„ ëª¨ë“ˆí™”)
5. **ë°°í¬ ì „ëµ**: GitHub Actions + í™˜ê²½ë³„ Firebase í”„ë¡œì íŠ¸

### ğŸ”„ í™•ì¥ì„± í™•ë³´ ë°©ì•ˆ
- **ëª¨ë“ˆí™”**: ê¸°ëŠ¥ë³„ ë…ë¦½ì ì¸ ëª¨ë“ˆ ì„¤ê³„
- **íƒ€ì… ì•ˆì •ì„±**: ì—„ê²©í•œ TypeScript ì ìš©
- **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±**: ì˜ì¡´ì„± ì£¼ì… ë° ì¶”ìƒí™”
- **ì„±ëŠ¥ ê³ ë ¤**: ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ë° ìµœì í™” ì „ëµ
- **ëª¨ë‹ˆí„°ë§**: ì„±ëŠ¥ ë° ì‚¬ìš©ì í–‰ë™ ë¶„ì„

---